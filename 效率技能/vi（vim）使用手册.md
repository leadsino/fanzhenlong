vi（vim）是我们Linux中使用的最多的工具了，不管你是配置服务，写脚本，总会用到它。但是vim作为一个“纯字符”模式下的工具，它的操作和windows中的文本操作相比就复杂一些。

vi的三种模式

1.命令模式：控制光标的移动，字符、字或者行的复制，移动及删除

2.输入模式：这个模式下才可以做文字输入，按[ESC]键可以回到命令行模式			

3.底行模式：将文件保存或者退出，也可以设置编辑环境。

#### vi的基本操作

##### 进入vi

在系统提示符后面加上vi及文件名，即可进入vi编辑界面

```
$ vi test.txt
```

刚进入vi后是命令模式下，切换到插入模式才能输入。

##### 切换至插入模式

在命令模式下按下”i“、”a“或者”o“三键就可以进入编辑模式

##### 退出插入模式

目前处于插入模式，只能够输入即删除，如果需要返回命令模式，按Esc键

##### 离开vi及保存文件

在命令模式可以输入冒号“：”

:w filename 将内容存入指定的文件

:wq 保存并退出

:q! 强制离开并放弃编辑的文件



#### 命令模式移动命令

|  命令  |   操作说明   |    注意     |    记忆方法    |
| :----: | :----------: | :---------: | :------------: |
|   h    |   光标向左   |             |                |
|   j    |   光标向下   |             |                |
|   k    |   光标向上   |             |                |
|   l    |   光标向右   |             |                |
| Ctrl+f |  翻到下一页  |             |     front      |
| Ctrl+b |  翻到上一页  |             |      back      |
| Ctrl+u |  向前翻半夜  |  页码变小   |                |
| Ctrl+d |  向后翻半夜  |  页码变大   |                |
|   ^    |   移到行头   |             |  往上就到头了  |
|   $    |   移到行尾   |             | 写完一行要给钱 |
|   w    |  下一个单词  |             |      word      |
|   b    |  上一个单词  |             |                |
|   e    | 下个单词词尾 |             |      end       |
|   #G   |  跳到第#行   | 如10G，130G |                |

#### 命令模式插入命令

| 命令 |   操作说明   | 注意 |           记忆方法           |
| :--: | :----------: | :--: | :--------------------------: |
|  i   |  光标前插入  |      |            insert            |
|  a   |  光标后插入  |      |            append            |
|  A   |  在行末插入  |      | 小词后面是小a，一行后面是大A |
|  o   | 另起一行插入 |      |         小鸡蛋掉下来         |
|  O   |  上一行插入  |      |         大泡泡飞上去         |

#### 命令模式删除命令

|  命令  |              操作说明              |      注意      |        记忆方法         |
| :----: | :--------------------------------: | :------------: | :---------------------: |
|   cw   | 删除一个单词（光标后，不包括空格） | 会进入插入模式 |      吃掉一个word       |
|   c$   |           删除光标到行尾           | 会进入插入模式 |   吃到最后，钱吃完了    |
|   c^   |           删除光标到行头           | 会进入插入模式 |      往上吃吃到头       |
|   x    |            删除一个字符            |                |     看你不爽就打叉      |
|   dd   |             删除一整行             |                |         del dir         |
|   dw   |      删除一个单词（包括空格）      |     光标后     |        del word         |
|   de   |     删除一个单词（不包括空格）     |     光标后     |         del end         |
|   d$   |           删除光标到行尾           |                |          del $          |
|   d^   |           删除光标到行首           |                |          del ^          |
|   J    |           将下一行合并行           |                |   钩子把下一行勾上来    |
|   u    |            撤销上次操作            |      单次      |          undo           |
|   U    |        撤销当前行的所有操作        |      多次      | 事情闹大了，小u不好解决 |
| ctrl+r |          恢复撤销前的操作          |                |         recover         |

多行删除：

**:#d**：删除第#行，底行模式

**:@,#d**：删除第@行到#行的内容，底行模式

**Ndd**：删除光标所在行下的N行（包括光标所在行）

#### 命令模式复制命令

| 命令 |                操作说明                |      注意      | 记忆方法 |
| :--: | :------------------------------------: | :------------: | :------: |
|  yy  |                复制整行                |                |          |
|  yw  |        复制光标到单次词尾的内容        |                |          |
|  y$  |          复制光标到行尾的内容          |                |          |
|  y^  |          复制光标到行首的内容          |                |          |
|  p   | 读取vi缓冲区的内容，粘贴到光标当前位置 | 不覆盖已有内容 |  paste   |

#### 底行模式查找命令

| 命令  |     操作说明     |        注意        |      记忆方法      |
| :---: | :--------------: | :----------------: | :----------------: |
| /word | 从上而下匹配word |                    |  /是从上而下写的   |
| ?word | 从下而上匹配word |                    | 字符在哪，回头找找 |
|   n   |  定位下一个匹配  | 查找命令回车后使用 |        next        |
|   N   |  定位上一个匹配  | 查找命令回车后使用 |                    |



#### 底行模式基本命令

|    命令    |   操作说明   |              注意              | 记忆方法  |
| :--------: | :----------: | :----------------------------: | :-------: |
|     :q     |     退出     |                                |   quit    |
|     :w     |     存盘     |          wq存盘并退出          |   write   |
|     :e     |  打开新文件  |                                |           |
|     :r     | 读取文件到vi | 读取的文件内容直接插入到文本中 |   read    |
|     :!     |     强制     |         q！不保存退出          |           |
|  :set nu   |   显示行号   |                                |  number   |
| ：set nonu |   隐藏行号   |                                | no number |

#### 底行模式搜索命令

|    命令     |          操作说明          |         注意         | 记忆方法 |
| :---------: | :------------------------: | :------------------: | :------: |
|   :s/1/2    |  搜索当前行第一个1并替换2  | 不是如/2会直接删除/1 |  search  |
|  :s/1/2/g   | 搜索当前行所有的1并替换为2 |                      |  global  |
| :@,#s/1/2/g | 在@和#间搜索所有的1替换为2 |                      |          |
| :%s/1/12/g  |   将整个文档中的1替换为2   |                      | 100%全部 |
|  :s/1/2/c   |     每次替换都给出提示     |                      | cue提示  |



vi可以同时打开多个文件

```
vi 1.txt 2.txt 3.txt
```

#### 多文档操作命令

|  命令  |       操作说明       |       注意       | 记忆方法 |
| :----: | :------------------: | :--------------: | :------: |
| :args  |    显示多文件信息    |                  |          |
| :next  |   切换到下一个文件   |                  |          |
| :prev  |   切换到上一个文件   |                  |          |
| :first |     定位到首文件     |                  |          |
| :last  |     定位到尾文件     |                  |          |
| Ctrl+^ | 快速回到切换前的文件 | 即是ctrl+shift+6 |          |



